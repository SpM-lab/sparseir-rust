# ndarray â†’ mdarray æœ€çµ‚ç§»è¡Œè¨ˆç”»

## ç¾çŠ¶è©•ä¾¡ï¼ˆPhase 7å®Œäº†å¾Œï¼‰

### ğŸ‰ äºˆæƒ³å¤–ã®ç™ºè¦‹

**ndarrayä½¿ç”¨ã¯æ—¢ã«æœ€å°é™ï¼**

å®Ÿéš›ã®ndarrayä¾å­˜ç®‡æ‰€ï¼š
1. **sve/result.rs**: `s: Array1<f64>` (1ç®‡æ‰€)
2. **basis.rs**: `s: Array1<f64>` (1ç®‡æ‰€) 
3. **interpolation1d.rs**: `coeffs: Array1<T>`, å†…éƒ¨é–¢æ•° (8ç®‡æ‰€)
4. **interpolation2d.rs**: `coeffs: Array2<T>`, å†…éƒ¨é–¢æ•° (9ç®‡æ‰€)
5. **xprec-svdçµ±åˆ**: SVDå…¥å‡ºåŠ› (è¤‡æ•°)

**é‡è¦**: poly.rsã¯ndarray::Array2ã‚’å†…éƒ¨ã§ä½¿ã†ãŒã€ä¸»ã«Legendreä¿‚æ•°ã®å†…éƒ¨è¡¨ç¾ã®ã¿ã€‚

### æˆ¦ç•¥ã®è¦‹ç›´ã—

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³A: å®Œå…¨ç§»è¡Œï¼ˆå¤§è¦æ¨¡ï¼‰
- å…¨ã¦ã®ndarrayä½¿ç”¨ã‚’mdarrayã«ç½®ãæ›ãˆ
- xprec-svdã‚‚fork & ç§»è¡Œ
- æ¨å®šæ™‚é–“: 20-30æ™‚é–“

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³B: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰é‹ç”¨ï¼ˆæ¨å¥¨ï¼‰âœ…
- æ–°è¦ã‚³ãƒ¼ãƒ‰: mdarrayä½¿ç”¨
- æ—¢å­˜ã‚³ãƒ¼ãƒ‰: ndarrayç¶™ç¶š
- å¤‰æ›ãƒ¬ã‚¤ãƒ¤ãƒ¼: `mdarray_compat`ã§æ©‹æ¸¡ã—
- xprec-svd: ndarrayç‰ˆã‚’ç¶™ç¶šä½¿ç”¨
- æ¨å®šæ™‚é–“: 2-3æ™‚é–“ï¼ˆã»ã¼å®Œäº†ï¼‰

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³C: Faerç›´æ¥çµ±åˆ
- xprec-svdã®ä»£ã‚ã‚Šã«Faerã®SVDã‚’ç›´æ¥ä½¿ç”¨
- é«˜ç²¾åº¦SVDï¼ˆJacobiæ–¹å¼ï¼‰ã‚’Faerã§å†å®Ÿè£…
- æ¨å®šæ™‚é–“: 10-15æ™‚é–“

## æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼šã‚ªãƒ—ã‚·ãƒ§ãƒ³Bï¼ˆãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ï¼‰

### ç†ç”±

1. **å®Ÿç”¨æ€§**: æ—¢å­˜ã®ãƒ†ã‚¹ãƒˆã¨ã‚³ãƒ¼ãƒ‰ãŒå‹•ä½œã™ã‚‹
2. **æ®µéšçš„**: å¿…è¦ã«å¿œã˜ã¦è¿½åŠ ç§»è¡Œå¯èƒ½
3. **æŸ”è»Ÿæ€§**: xprec-svdã®é«˜ç²¾åº¦SVDã‚’ç¶™ç¶šåˆ©ç”¨
4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: é‡è¦ãªéƒ¨åˆ†ã¯Faerã§æœ€é©åŒ–å¯èƒ½

### Phase 8-10ã®æ–°è¨ˆç”»

#### Phase 8: ãƒ†ã‚¹ãƒˆç¢ºèªï¼ˆ1æ™‚é–“ï¼‰
- æ—¢å­˜ãƒ†ã‚¹ãƒˆãŒå…¨ã¦ãƒ‘ã‚¹ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
- mdarrayç‰ˆã®ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
- äº’æ›æ€§æ¤œè¨¼

#### Phase 9: Faerãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼ˆ2æ™‚é–“ï¼‰
- Faer SVDã®æ€§èƒ½æ¸¬å®š
- xprec-svdï¼ˆJacobiï¼‰ã¨æ¯”è¼ƒ
- lambda=10, 100, 1000ã§ã®è¨ˆæ¸¬
- ç²¾åº¦æ¯”è¼ƒï¼ˆç‰¹ã«lambda=1000ï¼‰

#### Phase 10: çµ±åˆåˆ¤æ–­ï¼ˆ1æ™‚é–“ï¼‰
- Faer vs xprec-svdã®æ€§èƒ½ãƒ»ç²¾åº¦ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•è©•ä¾¡
- æœ€çµ‚çš„ãªçµ±åˆæˆ¦ç•¥ã‚’æ±ºå®š
  - ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: xprec-svdç¶™ç¶šï¼ˆç¾çŠ¶ç¶­æŒï¼‰
  - ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: Faer SVDæ¡ç”¨ï¼ˆã‚·ãƒ³ãƒ—ãƒ«åŒ–ï¼‰
  - ã‚ªãƒ—ã‚·ãƒ§ãƒ³3: ä¸¡æ–¹ã‚µãƒãƒ¼ãƒˆï¼ˆfeature flagï¼‰

### å®Ÿè£…æ¸ˆã¿ã®æ©‹æ¸¡ã—æ©Ÿèƒ½

```rust
// mdarray_compat.rs ã§å®Ÿè£…æ¸ˆã¿
pub fn array1_to_tensor<T: Clone>(arr: &Array1<T>) -> Tensor<T, (usize,)>
pub fn tensor_to_array1<T: Clone>(tensor: &Tensor<T, (usize,)>) -> Array1<T>
pub fn array2_to_tensor<T: Clone>(arr: &Array2<T>) -> Tensor<T, (usize, usize)>
pub fn tensor_to_array2<T: Clone>(tensor: &Tensor<T, (usize, usize)>) -> Array2<T>
```

ä½¿ç”¨ä¾‹ï¼š
```rust
// SVEResult (ndarrayç‰ˆ) ã‹ã‚‰ Tensorç‰ˆã¸
let s_tensor = mdarray_compat::array1_to_tensor(&sve_result.s);

// xprec-svdã®çµæœã‚’Tensorã§å—ã‘å–ã‚‹
let (u_nd, s_nd, v_nd) = xprec_svd::jacobi_svd(...);
let s_tensor = mdarray_compat::array1_to_tensor(&s_nd);
```

### æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

1. âœ… **Phase 8**: å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ»ç¢ºèª
2. ğŸ”„ **Phase 9**: Faerãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿæ–½
3. ğŸ¤” **Phase 10**: çµ±åˆæˆ¦ç•¥æ±ºå®š

æ¨å®šæ®‹ã‚Šæ™‚é–“: **4æ™‚é–“**ï¼ˆå½“åˆäºˆæƒ³ã®1/3ï¼‰

---
**ä½œæˆæ—¥**: 2025-01-08
**Phase 7è¦‹ç›´ã—å¾Œã®è¨ˆç”»**
